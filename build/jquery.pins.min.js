!function(a){var b,c={},d={init:function(e){b=this;var f={pin:".pin",margin:10,columns:3,animate:!1,animateTime:300,animateDelay:200};c=a.extend(!0,f,e),c.selector=a(c.pin),this.css({position:"relative"}),c.animate&&c.selector.css("opacity",0);var g=this.find("img"),h=!0;return g.each(function(){this.complete||(h=!1,a(this).load(function(){d.onLoad.apply(b)}))}),h&&d.onLoad.apply(this),this},onLoad:function(){d.reposition.apply(this,[b]);var a=d.calculateHeight.apply(this,[b]);this.height(a)},reposition:function(b){return a(c.pin,b).each(function(b){var d=e.getPinY(a(this)),f=e.getPinX(a(this)),g=d+30;if(a(this).css({position:"absolute",top:d+"px",left:f+"px"}),c.animate){var h=a(this);window.setTimeout(function(){e.animate(h,g,d)},c.animateDelay*b)}}),this},calculateHeight:function(b){for(var d=Math.ceil(a(c.pin,b).length/c.columns),e=0,f=0;f<c.columns;++f){for(var g=0,h=0;d>h;++h){var i=h*c.columns+f,j=a(c.pin).eq(i);if(0==j.length)break;var k=c.margin;h==d-1&&(k=0),g+=j.outerHeight(!0)+k}g>e&&(e=g)}return e}},e={getPinX:function(a){var b=a.index(),d=a.outerWidth(),e=b%c.columns;return e*(d+c.margin)},getPinY:function(a){var b=a.index(),d=b-c.columns;if(d>=0){var e=c.selector.eq(d),f=e.outerHeight(),g=e.position().top;return f+g+c.margin}return 0},animate:function(a,b,d){a.css({opacity:0,top:b+"px"}).animate({opacity:1,top:d+"px"},c.animateTime)}};a.fn.pins=function(b){return d[b]?d[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?(a.error("Method "+b+" does not exist in jQuery pins"),void 0):d.init.apply(this,arguments)}}(jQuery);