!function(a){var b={},c={init:function(d){var e=this,f={pin:".pin",margin:10,columns:3,animate:!1,animateTime:300,animateDelay:200};b=a.extend(!0,f,d),b.selector=a(b.pin),this.css({position:"relative"}),b.animate&&b.selector.css("opacity",0);var g=this.find("img"),h=!0;return g.each(function(){this.complete||(h=!1,a(this).load(function(){c.onLoad.apply(e)}))}),h&&c.onLoad.apply(this),this},onLoad:function(){c.reposition.apply(this,arguments);var a=c.calculateHeight.apply(this);this.height(a)},reposition:function(){return a(b.pin).each(function(c){var e=d.getPinY(a(this)),f=d.getPinX(a(this)),g=e+30;if(a(this).css({position:"absolute",top:e+"px",left:f+"px"}),b.animate){var h=a(this);window.setTimeout(function(){d.animate(h,g,e)},b.animateDelay*c)}}),this},calculateHeight:function(){for(var c=Math.ceil(a(b.pin).length/b.columns),d=0,e=0;e<b.columns;++e){for(var f=0,g=0;c>g;++g){var h=g*b.columns+e,i=a(b.pin).eq(h);if(0==i.length)break;var j=b.margin;g==c-1&&(j=0),f+=i.outerHeight(!0)+j}f>d&&(d=f)}return d}},d={getPinX:function(a){var c=a.index(),d=a.outerWidth(),e=c%b.columns;return e*(d+b.margin)},getPinY:function(a){var c=a.index(),d=c-b.columns;if(d>=0){var e=b.selector.eq(d),f=e.outerHeight(),g=e.position().top;return f+g+b.margin}return 0},animate:function(a,c,d){a.css({opacity:0,top:c+"px"}).animate({opacity:1,top:d+"px"},b.animateTime)}};a.fn.pins=function(b){return c[b]?c[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?(a.error("Method "+b+" does not exist in jQuery pins"),void 0):c.init.apply(this,arguments)}}(jQuery);